<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>Misaki Eda | Portfolio</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-main: #ffffff;
      --bg-card: #ffffff;
      --accent-red: #ff0000;
      --text-main: #000000;
      --text-muted: #000000;
      --border-subtle: #000000;
      --max-width: 1100px;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: "Noto Sans JP", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #ffffff;
      color: #000000;
      min-height: 100vh;
      overflow-x: hidden; /* 円のはみ出しで横スクロール/余白が出ないようにする */
    }
    html { scroll-behavior: smooth; }

    .page {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* ===== header ===== */
    /* --- Hero セクション中央寄せに変更 --- */
/* --- Hero セクション（左右に画像＋中央テキスト） --- */
.hero {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 4.5rem 0;
  text-align: left;
  background: #ffffff;
  overflow: hidden;
}

.hero-inner {
  /* max-widthを外して、横幅いっぱいに広げる */
  width: 100%;
  margin: 0;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0;  /* 左右を端にくっつける */
}
.nowrap {
  white-space: nowrap;
}

.hero-copy {
  /* テキストブロックの最大幅だけここで制限 */
  flex: 0 1 540px;
  max-width: 540px;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  /* 顔との距離はここで調整（もっと寄せたければ 2rem とかにしてOK） */
  margin: 0 3rem;
}
/* タグは中央でも成立するよう微調整 */
.hero-tag {
  margin: 0 0 1.1rem;
}

/* 左右の顔コンテナ：ページ端にくっつけて、横幅いっぱいに広がる */
.hero-face {
  /* 左右に均等に拡張してページ端にくっつく */
  flex: 1 0 0;      /* 残りのスペースを均等に分配 */
  height: 72vh;
  overflow: hidden; /* 顔がはみ出さないようにカット */
}

/* 顔画像：コンテナいっぱいに表示してズーム＆半分表示 */
.hero-face-inner {
  width: 100%;
  height: 100%;
  position: relative; /* 回転テキストのabsolute基準 */
  border-radius: 0;
  overflow: hidden;
  background-color: transparent;
  /* 背景画像を2倍にして、正確に半分だけを切り取る */
  background-size: 200% 100%;        /* 横を2倍にして半分だけ見えるようにする */
  background-position: center center; /* 基本は中央寄せ */
  background-repeat: no-repeat;
  box-shadow: none;
}
/* 左側には画像の右半分を表示 */
.hero-face-left {
  background-position: 100% center;  /* 背景の右側（右半分）を表示 */
}

/* 右側には画像の左半分を表示 */
.hero-face-right {
  background-position: 0% center;  /* 背景の左側（左半分）を表示 */
  position: relative;
}

    /* ===== 回転テキスト（やればできる） ===== */
    @keyframes rotateCW {
      from { transform: rotate(0deg); }
      to   { transform: rotate(360deg); }
    }

    @keyframes rotateCCW {
      from { transform: rotate(0deg); }
      to   { transform: rotate(-360deg); }
    }

    .rotating-text-wrapper {
      position: absolute;
      top: 45%;
      right: -280px;
      transform: translateY(-50%);
      width: 560px;
      height: 560px;
      pointer-events: none;
    }

    .rotating-text-wrapper--left {
      right: auto;
      left: -280px;
    }

    /* 右：左回り（反時計回り） */
    .rotating-text-circle {
      position: absolute;
      width: 100%;
      height: 100%;
      animation: rotateCCW 10s linear infinite;
    }

    /* 左：右回り（時計回り） */
    .rotating-text-circle--left {
      animation: rotateCW 10s linear infinite;
    }

    .rotating-text-svg {
      width: 100%;
      height: 100%;
    }

    .rotating-text-text {
      font-size: 18px;
      font-weight: 700;
      letter-spacing: 0.25em;
      fill: #ff0000;
    }

    /* ===== hero ===== */
    .hero-tag-dot {
      width: 8px; height: 8px; border-radius: 999px;
      background: #ff0000; box-shadow: 0 0 10px rgba(255, 0, 0, 0.8);
    }
    .hero-eyebrow {
      font-size: 0.85rem; color: #000000;
      letter-spacing: 0.16em; text-transform: uppercase;
      margin-bottom: 0.3rem;
    }
    .hero-title-ja {
      font-size: clamp(2.0rem, 3vw + 1rem, 2.8rem);
      font-weight: 800; line-height: 1.2; margin-bottom: 0.3rem;
      color: #000000;
    }
    .hero-title-ja span {
      color: var(--accent-red);
      text-shadow: none;
    }
    .hero-title-en {
      font-size: 0.95rem; color: #ff0000;
      letter-spacing: 0.2em; text-transform: uppercase;
      margin-bottom: 1.6rem;
    }
    .hero-body {
      font-size: 0.95rem;
      color: #000000;
      line-height: 1.9;
      max-width: 32rem;
      margin-bottom: 1.2rem;
    }

    .hero-label {
      display: inline-block;
      padding: 0.35rem 0.65rem;
      border: 1px solid #000000;
      border-radius: 0.5rem;
      background: #ffffff;
      color: #000000;
      font-size: 0.78rem;
      font-weight: 700;
      letter-spacing: 0.08em;
      margin: 0.35rem 0 0.6rem;
    }

    .hero-body--future {
      margin-bottom: 1.8rem; /* 次のボタンまで余白を戻す */
    }
    .hero-body span { color: var(--accent-red); font-weight: 600; }
    .hero-meta {
      font-size: 0.85rem; color: #000000;
      margin-bottom: 1.6rem;
    }
    .hero-meta strong { color: #000000; }
    .hero-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 0.8rem;
      margin-bottom: 1.6rem;
      justify-content: flex-start;
    }
    .btn-primary, .btn-ghost {
      border-radius: 999px; padding: 0.65rem 1.3rem;
      font-size: 0.9rem; font-weight: 600; text-decoration: none;
      display: inline-flex; align-items: center; gap: 0.4rem; cursor: pointer;
      border: 1px solid transparent;
      transition: transform 0.12s ease-out, box-shadow 0.12s ease-out,
                  border-color 0.12s ease-out, background 0.12s ease-out;
    }
    .btn-primary {
      background: linear-gradient(135deg, #ff0000, #990000);
      color: #ffffff;
      box-shadow: none;
    }
    .btn-primary:hover {
      transform: translateY(-1px);
      box-shadow: none;
    }
    .btn-ghost {
      background: #ffffff;
      border-color: #000000;
      color: #000000;
    }
    .btn-ghost:hover {
      border-color: #ff0000;
      background: #ffffff;
      box-shadow: none;
    }
    .hero-note {
      font-size: 0.75rem; color: #000000;
    }
    .hero-note span { color: #ff0000; }

    .hero-card {
      position: relative; width: 100%; max-width: 390px;
      border-radius: 1.6rem; padding: 1.3rem 1.3rem 1.4rem;
      background: #ffffff;
      border: 1px solid #000000;
      box-shadow: none;
      overflow: hidden;
    }
    .hero-card-photo {
      position: relative; border-radius: 1.2rem; overflow: hidden;
      background: #ffffff;
      height: 220px; margin-bottom: 0.85rem;
      border: 1px solid #000000;
    }
    .hero-card-photo::after {
      content: ""; position: absolute; inset: 0;
      background: transparent;
      mix-blend-mode: soft-light;
    }
    .hero-card-badge {
      position: absolute; left: 1rem; bottom: 1rem;
      padding: 0.25rem 0.6rem; border-radius: 999px;
      background: #ffffff;
      border: 1px solid #000000;
      font-size: 0.75rem;
      display: inline-flex; align-items: center; gap: 0.25rem;
      color: #000000;
    }
    .hero-card-badge-dot {
      width: 8px; height: 8px; border-radius: 999px; background: #ff0000;
    }

    /* ===== 共通セクション ===== */
    .section {
      padding: 3.5rem 1.5rem 4.0rem;
      background: #ffffff;
    }
    .section-inner {
      max-width: var(--max-width);
      margin: 0 auto;
    }
    .section-title-eyebrow {
      font-size: 0.8rem;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: var(--text-muted);
      margin-bottom: 0.3rem;
    }
    .section-title-main {
      font-size: 1.6rem;
      font-weight: 700;
      margin-bottom: 1.8rem;
    }
    .section-title-main span { color: #ff0000; }

    /* Projects */
    .projects-grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 1.5rem;
    }
    .project-card {
      border-radius: 1.1rem;
      padding: 1.2rem 1.2rem 1.3rem;
      background: #ffffff;
      border: 1px solid #000000;
      box-shadow: none;
      color: #000000;
    }
    .project-card-link {
      display: block;
      text-decoration: none;
      color: inherit;
      cursor: pointer;
      transition: transform 0.12s ease-out, box-shadow 0.12s ease-out, border-color 0.12s ease-out;
    }
    .project-card-link:hover {
      transform: translateY(-2px);
      box-shadow: none;
      border-color: #ff0000;
    }
    /* ===== project thumbnail (fix for unstyled <img>) ===== */
.project-thumb {
  width: 100%;
  border-radius: 14px;
  overflow: hidden;
  border: 1px solid #000000;
  background: #ffffff;
  box-shadow: none;
  margin-bottom: 0.9rem
}

.project-thumb img {
  width: 100%;
  height: 100%;
  display: block;
  aspect-ratio: 16 / 10;
  object-fit: cover;
  object-position: center;
}
    .project-tag {
      font-size: 0.7rem;
      color: #ff0000;
      margin-bottom: 0.3rem;
      letter-spacing: 0.12em;
      text-transform: uppercase;
    }
    .project-title {
      font-size: 1.0rem;
      font-weight: 600;
      margin-bottom: 0.4rem;
    }
    .project-meta {
      font-size: 0.75rem;
      color: #000000;
      margin-bottom: 0.6rem;
    }
    .project-body {
      font-size: 0.85rem;
      line-height: 1.7;
      margin-bottom: 0.7rem;
    }
    .project-pill {
      display: inline-block;
      font-size: 0.7rem;
      padding: 0.2rem 0.55rem;
      border-radius: 999px;
      border: 1px solid var(--accent-red);
      color: var(--accent-red);
      background: #ffffff;
    }

    /* ===== Works (作ったもの) ===== */
    .works-grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 1.2rem;
    }

    .work-card {
      border-radius: 1.1rem;
      padding: 1.1rem 1.1rem 1.2rem;
      background: #ffffff;
      border: 1px solid #000000;
      box-shadow: none;
      color: #000000;
    }

    .work-card a {
      color: inherit;
      text-decoration: none;
      display: block;
    }

    .work-tag {
      font-size: 0.72rem;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: #ff0000;
      margin-bottom: 0.35rem;
    }

    .work-title {
      font-size: 1.0rem;
      font-weight: 700;
      margin-bottom: 0.35rem;
    }

    .work-body {
      font-size: 0.85rem;
      line-height: 1.7;
      color: var(--text-main);
      margin-bottom: 0.75rem;
    }

    .work-meta {
      font-size: 0.75rem;
      color: #000000;
    }

    .work-links {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-top: 0.8rem;
    }

    .work-link {
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      font-size: 0.75rem;
      padding: 0.25rem 0.55rem;
      border-radius: 999px;
      border: 1px solid #000000;
      background: #ffffff;
      color: #000000;
      text-decoration: none;
    }

    .work-link:hover {
      border-color: #ff0000;
      color: #ff0000;
    }

    @media (max-width: 900px) {
      .works-grid {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }

    @media (max-width: 640px) {
      .works-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    /* About & Contact */
    .about-layout {
      display: grid;
      grid-template-columns: minmax(0, 2.1fr) minmax(0, 2fr);
      gap: 2.0rem;
    }
    .about-text { font-size: 0.95rem; line-height: 1.9; color: #000000; }
    .about-text p + p { margin-top: 0.8rem; }
    .about-list {
      font-size: 0.85rem;
      list-style: none;
      display: grid;
      gap: 0.4rem;
      margin-top: 0.6rem;
    }
    .about-list span { color: #ff0000; }

    .contact-box {
      border-radius: 1.0rem;
      border: 1px solid #000000;
      padding: 1.2rem 1.3rem;
      background: #ffffff;
      font-size: 0.9rem;
      color: #000000;
    }
    .contact-row + .contact-row { margin-top: 0.6rem; }
    .contact-label {
      font-size: 0.78rem;
      color: #000000;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      margin-bottom: 0.1rem;
    }
    .contact-value a {
      color: #ff0000;
      text-decoration: none;
    }
    .contact-value a:hover {
      text-decoration: underline;
    }

    /* responsive */
    @media (max-width: 900px) {
      .hero-inner {
        gap: 2.2rem;
      }
        .hero-face {
    max-width: 260px;
    width: 70%;
  }
      .projects-grid {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
      .about-layout {
        grid-template-columns: minmax(0, 1fr);
      }
    }
    @media (max-width: 640px) {
      .nav-links { display: none; }

      /* padding-inline だと環境によって効き方がズレることがあるので明示 */
      .nav-inner, .hero, .section {
        padding-left: 1.1rem;
        padding-right: 1.1rem;
      }

      .projects-grid {
        grid-template-columns: minmax(0, 1fr);
      }

      /* ヒーローをスマホでは中央寄せ（全体が左に寄らないように） */
      .hero-inner {
        gap: 0;
        justify-content: center;
      }

      .hero-face {
        display: none;
      }

      .hero-copy {
        flex: 1 1 auto;
        margin: 0 auto;
        max-width: 560px;
      }
    }
    .subprojects-grid {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 1.0rem;
}

.subproject-item {
  border-radius: 0.9rem;
  padding: 0.9rem 1.0rem;
  background: #ffffff;
  border: 1px solid #000000;
  box-shadow: none;
  font-size: 0.85rem;
  line-height: 1.7;
  color: #000000;
}

.subproject-tag {
  font-size: 0.95rem;
  letter-spacing: 0.14em;
  text-transform: uppercase;
  color: #ff0000;
  font-weight: 600;
  margin-bottom: 0.3rem;
}

.subproject-body {
  font-size: 0.83rem;
  color: var(--text-main);
}

/* ===== simple intro (temporary) ===== */
.simple-intro {
  padding: 2.2rem 1.5rem 2.8rem;
  background: #ffffff;
  color: #000000;
}

.simple-intro-inner {
  max-width: 1100px;
  margin: 0 auto;
  display: grid;
  grid-template-columns: 1.15fr 0.85fr;
  gap: 2.2rem;
  align-items: start;
}

.simple-intro-eyebrow {
  font-size: 0.7rem;
  letter-spacing: 0.18em;
  text-transform: uppercase;
  color: #000000;
}

.simple-intro-title {
  font-size: clamp(2.0rem, 3.2vw, 2.6rem);
  font-weight: 800;
  line-height: 1.4;
  color: #000000;
}

.simple-intro-title span {
  color: #ff0000;
}

.simple-intro-body {
  font-size: 1.05rem;
  line-height: 1.9;
  color: #000000;
  max-width: 52rem;
}

.simple-intro-left {
  display: flex;
  flex-direction: column;
  gap: 0.9rem;
  padding-top: 0.8rem; /* ← これで少し下に下がる */
}

.simple-intro-photo {
  width: 100%;
  border-radius: 24px;
  overflow: hidden;
  background: #ffffff;
  border: 1px solid #000000;
  box-shadow: none;
}

.simple-intro-photo img {
  width: 100%;
  height: 100%;
  display: block;
  aspect-ratio: 4 / 5;
  object-fit: cover;
  object-position: center;
}

@media (max-width: 900px) {
  .simple-intro-inner {
    grid-template-columns: 1fr;
    gap: 1.5rem;
  }
  .simple-intro-photo img {
    aspect-ratio: 16 / 10;
  }
}

/* スマホ */
@media (max-width: 640px) {
  .simple-intro {
    padding: 1.6rem 1.1rem 1.4rem;
  }

  .simple-intro-inner {
    gap: 1.0rem;
  }

  .simple-intro-left {
    padding-top: 0;
    gap: 0.6rem;
  }

  .simple-intro-title {
    font-size: 1.55rem;
    line-height: 1.25;
  }

  /* スマホでは nowrap を解除して横はみ出し（右側の余白/横スクロール）を防ぐ */
  .simple-intro .nowrap {
    white-space: normal;
  }

  /* 本文も少し小さくして全体の高さを圧縮 */
  .simple-intro-body,
  .simple-intro-body2 {
    font-size: 0.95rem;
    line-height: 1.75;
  }

  /* 上の顔写真が大きくなりすぎないように制限 */
  .simple-intro-photo {
    max-width: 280px;
    margin: 0 auto;
  }
  .simple-intro-photo img {
    width: 100%;
    height: auto;
    max-height: 260px;
    aspect-ratio: 4 / 5;
    object-fit: cover;
    object-position: center;
  }
}

    @media (max-width: 640px) {
      .subprojects-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    /* ===== Investment ===== */
    .investment-grid {
      display: grid;
      grid-template-columns: minmax(0, 1fr);
      gap: 1.2rem;
    }

    .investment-card {
      border-radius: 1.1rem;
      padding: 1.2rem 1.3rem 1.3rem;
      background: #ffffff;
      border: 1px solid #000000;
      box-shadow: none;
      color: #000000;
    }

    .investment-tag {
      font-size: 0.72rem;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      color: #ff0000;
      margin-bottom: 0.35rem;
    }

    .investment-title {
      font-size: 1.05rem;
      font-weight: 700;
      margin-bottom: 0.4rem;
    }

    .investment-body {
      font-size: 0.9rem;
      line-height: 1.8;
      color: var(--text-main);
    }

    /* ===== Contact Form ===== */
    .contact-form {
      border-radius: 1.0rem;
      border: 1px solid #000000;
      padding: 1.5rem 1.6rem;
      background: #ffffff;
      margin-top: 1.5rem;
      margin-bottom: 2.0rem;
    }

    .form-group {
      margin-bottom: 1.2rem;
    }

    .form-group:last-child {
      margin-bottom: 0;
    }

    .form-label {
      display: block;
      font-size: 0.78rem;
      color: #000000;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      margin-bottom: 0.4rem;
      font-weight: 600;
    }

    .form-input,
    .form-textarea {
      width: 100%;
      padding: 0.7rem 0.9rem;
      border: 1px solid #000000;
      border-radius: 0.5rem;
      font-family: "Noto Sans JP", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      font-size: 0.9rem;
      color: #000000;
      background: #ffffff;
      transition: border-color 0.12s ease-out, box-shadow 0.12s ease-out;
    }

    .form-input:focus,
    .form-textarea:focus {
      outline: none;
      border-color: #ff0000;
      box-shadow: 0 0 0 2px rgba(255, 0, 0, 0.1);
    }

    .form-textarea {
      resize: vertical;
      min-height: 120px;
    }

    .form-submit {
      background: linear-gradient(135deg, #ff0000, #990000);
      color: #ffffff;
      border: none;
      border-radius: 999px;
      padding: 0.7rem 1.6rem;
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.12s ease-out, box-shadow 0.12s ease-out;
    }

    .form-submit:hover {
      transform: translateY(-1px);
      box-shadow: 0 2px 8px rgba(255, 0, 0, 0.2);
    }

    .form-submit:active {
      transform: translateY(0);
    }

    .form-status {
      font-size: 0.85rem;
      margin-top: 0.8rem;
      padding: 0.6rem 0.9rem;
      border-radius: 0.5rem;
      display: none;
    }

    .form-status.success {
      background: #e8f5e9;
      color: #2e7d32;
      display: block;
    }

    .form-status.error {
      background: #ffebee;
      color: #c62828;
      display: block;
    }

    /* ===== Responsive Design ===== */
    @media (max-width: 900px) {
      .contact-form {
        padding: 1.2rem 1.3rem;
        margin-bottom: 1.5rem;
      }

      .form-input,
      .form-textarea {
        font-size: 16px;
      }
    }

    @media (max-width: 640px) {
      .contact-form {
        padding: 1.0rem 1.1rem;
        margin-top: 1.2rem;
        margin-bottom: 1.2rem;
      }

      .form-group {
        margin-bottom: 1.0rem;
      }

      .form-label {
        font-size: 0.73rem;
        margin-bottom: 0.3rem;
      }

      .form-input,
      .form-textarea {
        padding: 0.6rem 0.8rem;
        font-size: 16px;
      }

      .form-textarea {
        min-height: 100px;
      }

      .form-submit {
        width: 100%;
        padding: 0.65rem 1.2rem;
        font-size: 0.85rem;
      }

      .contact-box {
        padding: 1.0rem 1.1rem;
        font-size: 0.85rem;
      }

      .contact-row + .contact-row {
        margin-top: 0.5rem;
      }

      .contact-label {
        font-size: 0.72rem;
        margin-bottom: 0.08rem;
      }

      .contact-value {
        font-size: 0.8rem;
      }
    }
  </style>
</head>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    // 1秒ごとに切り替える画像リスト（順番：や → れ → ば → で → き → る）
    const heroImages = [
      "images/や！.png",
      "images/れ！.png",
      "images/ば！.png",
      "images/で！.png",
      "images/き！.png",
      "images/る！.png",
    ];

    let heroIndex = 0;
    const leftFace  = document.getElementById("heroFaceLeft");
    const rightFace = document.getElementById("heroFaceRight");


    function updateHeroFaces() {
      const src = heroImages[heroIndex];
      // 左右どちらも同じ画像をセット、表示位置はCSS側で左右入れ替え
      if (leftFace && rightFace) {
        leftFace.style.backgroundImage  = `url("${src}")`;
        rightFace.style.backgroundImage = `url("${src}")`;
      }

      heroIndex = (heroIndex + 1) % heroImages.length;
    }

    // 最初の1枚を表示してから、1秒ごとに更新
    updateHeroFaces();
    setInterval(updateHeroFaces, 1000);

    // ===== CMS data (GitHub Pages-safe) =====
    // microCMSのAPIキーをブラウザに置くと漏洩するため、GitHub Pagesでは
    // 1) GitHub Actions で microCMS から取得して JSON を生成し
    // 2) /data/projects.json と /data/works.json を同梱して配信
    // という方式が安全です。

    // Always render CMS projects into #projects-cms (below the 6 static project cards).
    // Never fall back to the first .projects-grid, otherwise CMS cards can appear above.
    let projectsGrid = document.querySelector("#projects-cms");
    if (!projectsGrid) {
      // Safety net: if the container is missing for any reason, create it at the end of the Projects section.
      const projectsSectionInner = document.querySelector("#projects .section-inner");
      if (projectsSectionInner) {
        projectsGrid = document.createElement("div");
        projectsGrid.id = "projects-cms";
        projectsGrid.className = "projects-grid";
        projectsGrid.style.marginTop = "1.5rem";
        projectsSectionInner.appendChild(projectsGrid);
      }
    }
    const worksGrid = document.querySelector("#works .works-grid");
    // CMS container should start empty; do not prepend any fallback HTML.
    const projectsFallbackHTML = "";
    const worksFallbackHTML = worksGrid ? worksGrid.innerHTML : "";

    function escapeHtml(str) {
      return String(str ?? "")
        .replaceAll("&", "&amp;")
        .replaceAll("<", "&lt;")
        .replaceAll(">", "&gt;")
        .replaceAll('"', "&quot;")
        .replaceAll("'", "&#39;");
    }

    function safeUrl(url) {
      if (!url) return "#";
      try {
        const u = new URL(url, location.href);
        return u.href;
      } catch {
        return "#";
      }
    }

    function normalizeProject(item) {
      const href = item.href || item.url || item.link || item.page || item.path;
      const imgObj = item.thumbnail || item.thumb || item.image || item.cover;
      const img = (imgObj && (imgObj.url || imgObj.src)) || item.imageUrl || item.thumbnailUrl;

      return {
        tag: item.tag || item.category || "PROJECT",
        href: href ? safeUrl(href) : "",
        img: img || "",
        imgAlt: item.imgAlt || item.alt || item.title || "project thumbnail",
        title: item.title || item.name || "",
        meta: item.meta || item.subtitle || "",
        body: item.body || item.description || "",
        pill: item.pill || item.badge || item.role || "",
      };
    }

    function normalizeWork(item) {
      const links = Array.isArray(item.links) ? item.links : (Array.isArray(item.link) ? item.link : []);
      return {
        tag: item.tag || item.category || "WORK",
        title: item.title || item.name || "",
        body: item.body || item.description || "",
        tech: item.tech || item.stack || item.meta || "",
        links: links
          .map((l) => ({
            label: l.label || l.text || l.name || "Link",
            url: safeUrl(l.url || l.href || "#"),
          }))
          .filter((l) => l.url && l.url !== "#"),
      };
    }

    function renderProjects(list) {
      if (!projectsGrid) return;
      const html = list
        .map((p) => {
          const thumb = p.img
            ? `<div class="project-thumb"><img src="${escapeHtml(p.img)}" alt="${escapeHtml(p.imgAlt)}" loading="lazy" /></div>`
            : "";
          const isLink = p.href && p.href !== "#";
          const open = isLink
            ? `<a class="project-card project-card-link" href="${escapeHtml(p.href)}">`
            : `<div class="project-card">`;
          const close = isLink ? `</a>` : `</div>`;

          return `
            ${open}
              <div class="project-tag">${escapeHtml(p.tag)}</div>
              ${thumb}
              <h3 class="project-title">${escapeHtml(p.title)}</h3>
              <p class="project-meta">${escapeHtml(p.meta)}</p>
              <p class="project-body">${escapeHtml(p.body)}</p>
              ${p.pill ? `<span class="project-pill">${escapeHtml(p.pill)}</span>` : ""}
            ${close}
          `;
        })
        .join("");

      projectsGrid.innerHTML = html;
    }

    function renderWorks(list) {
      if (!worksGrid) return;
      const html = list
        .map((w) => {
          const links = w.links?.length
            ? `
              <div class="work-links">
                ${w.links
                  .map(
                    (l) => `<a class="work-link" href="${escapeHtml(l.url)}" target="_blank" rel="noopener noreferrer">${escapeHtml(l.label)}</a>`
                  )
                  .join("")}
              </div>
            `
            : "";

          return `
            <div class="work-card">
              <div class="work-tag">${escapeHtml(w.tag)}</div>
              <div class="work-title">${escapeHtml(w.title)}</div>
              <p class="work-body">${escapeHtml(w.body)}</p>
              ${w.tech ? `<div class="work-meta">Tech: ${escapeHtml(w.tech)}</div>` : ""}
              ${links}
            </div>
          `;
        })
        .join("");

      worksGrid.innerHTML = worksFallbackHTML + html;
    }

    async function fetchLocalJson(path) {
      // Always resolve relative to the current document URL
      const url = new URL(path, document.baseURI).toString();
      const res = await fetch(url, { method: "GET", cache: "no-store" });
      if (!res.ok) throw new Error(`local JSON fetch failed: ${url} (${res.status})`);
      return res.json();
    }

    async function tryHydrateFromLocalJson() {
      try {
        // projects
        if (projectsGrid) {
          const data = await fetchLocalJson("data/projects.json");
          const contents = Array.isArray(data?.contents) ? data.contents : (Array.isArray(data) ? data : []);
          if (contents.length) renderProjects(contents.map(normalizeProject));
        }

        // works
        if (worksGrid) {
          const data = await fetchLocalJson("data/works.json");
          const contents = Array.isArray(data?.contents) ? data.contents : (Array.isArray(data) ? data : []);
          if (contents.length) renderWorks(contents.map(normalizeWork));
        }
        document.documentElement.setAttribute("data-cms", "ok");
      } catch (err) {
        // 失敗したら静的フォールバックを維持
        console.warn("CMS hydrate failed; fallback to static HTML.", err);
        // Quick visual hint for debugging (remove later if you want)
        document.documentElement.setAttribute("data-cms", "failed");
      }
    }

    // JSONがあれば差し替え（成功したら動的、失敗したら静的のまま）
    tryHydrateFromLocalJson();

    // コンタクトフォーム処理
    const contactForm = document.getElementById("contactForm");
    const formStatus = document.getElementById("formStatus");

    if (contactForm) {
      contactForm.addEventListener("submit", async function (e) {
        e.preventDefault();

        const name = contactForm.querySelector('input[name="name"]').value;
        const email = contactForm.querySelector('input[name="email"]').value;
        const message = contactForm.querySelector('textarea[name="message"]').value;

        // Apps ScriptのエンドポイントにPOST送信
const APPS_SCRIPT_URL =
  "https://script.google.com/macros/s/AKfycbxrAB8Mza4lmj9HwXxMe6NRdBb7_kLknlu4tPcxF7Td-apEoZHLyargb2Fy5iFHVVOGBA/exec";
        // NOTE: GitHub Pagesなど別ドメインから送る場合、Apps ScriptはCORSヘッダーを返さないため
        // `mode: "no-cors"` にするのが安全です（その場合 response は opaque になります）
        if (!APPS_SCRIPT_URL || APPS_SCRIPT_URL.includes("YOUR_APPS_SCRIPT_WEBAPP_URL_HERE")) {
          throw new Error("APPS_SCRIPT_URL が未設定です。Apps Script の /exec URL を設定してください。");
        }
        try {
          const response = await fetch(APPS_SCRIPT_URL, {
            method: "POST",
            mode: "no-cors",
            headers: {
              "Content-Type": "text/plain;charset=utf-8",
            },
            body: JSON.stringify({
              name: name,
              email: email,
              message: message,
              page: location.href,
              userAgent: navigator.userAgent,
              timestamp: new Date().toISOString(),
            }),
          });

          const isSuccess = response.ok || response.type === "opaque";
          if (isSuccess) {
            formStatus.textContent = "メッセージを送信しました！ありがとうございます。";
            formStatus.classList.remove("error");
            formStatus.classList.add("success");
            contactForm.reset();
          } else {
            formStatus.textContent = "送信に失敗しました。しばらく後に試してください。";
            formStatus.classList.remove("success");
            formStatus.classList.add("error");
          }
        } catch (error) {
          formStatus.textContent = "エラーが発生しました。後でお試しください。";
          formStatus.classList.remove("success");
          formStatus.classList.add("error");
          console.error("Error:", error);
        }
      });
    }
  });
</script>
<body>
    <!-- テスト：画像がちゃんと見えるか確認 -->
  <div class="page">
    <!-- simple intro (temporary) -->
    <section class="simple-intro">
      <div class="simple-intro-inner">
        <div class="simple-intro-left">
          <p class="simple-intro-eyebrow">My Purpose</p>
          <h1 class="simple-intro-title">
            <span>根拠のない自信でも</span>
            <br><span class="nowrap">やればできるを、行動で証明する。</span>
          </h1>
          <h2 class="simple-intro-body2">
  これまで、<strong>スポンサー2,700万円の獲得</strong>や<strong>高専祭の打ち上げ花火</strong>の実現など、
  「やる」と決めたことを周りを巻き込みながら形にしてきました。<br>
  今は<strong>介護現場の人手不足を</strong>スポットワークで解決する、AR×AIのプロダクト開発に挑戦中です。
          </h2>
        </div>

        <div class="simple-intro-photo">
          <img src="images/えだみさ.png" alt="江田 岬毅" />
        </div>
      </div>
    </section>
    <!-- header -->
    <header class="site-header">
      <div class="nav-inner">
        <div class="brand">
          <div class="brand-mark"></div>

    </header>

    <!-- hero -->
    <main>
      <section class="hero">
  <div class="hero-inner">
    <!-- 左側の顔 -->
    <div class="hero-face">
      <div class="hero-face-inner hero-face-left" id="heroFaceLeft">
        <!-- 回転テキスト「やればできる」 -->
        <div class="rotating-text-wrapper rotating-text-wrapper--left">
          <div class="rotating-text-circle rotating-text-circle--left">
            <svg class="rotating-text-svg" viewBox="0 0 560 560" aria-hidden="true">
              <defs>
                <path id="circlePathLeft" d="M280,280 m-240,0 a240,240 0 1,1 480,0 a240,240 0 1,1 -480,0" />
              </defs>
              <text class="rotating-text-text" textLength="1508" lengthAdjust="spacing">
                <textPath href="#circlePathLeft">
                  やればできる　・　やればできる　・　やればできる　・　やればできる　・　やればできる　・　やればできる　・　やればできる　・　やればできる　・　やればできる　
                </textPath>
              </text>
            </svg>
          </div>
        </div>
      </div>
    </div>

    <!-- 真ん中のテキスト（今の hero-copy をそのまま） -->
    <div class="hero-copy">
      <div class="hero-tag">
      </div>
      <p class="hero-eyebrow">ABOUT</p>
      <h1 class="hero-title-ja">
        自己紹介と<br><span>今後やりたいこと</span>
      </h1>

      <div class="hero-label">自己紹介</div>
      <p class="hero-body">
        神山まるごと高専1期生。<br>
        完璧な計画よりも、仮説を立てて試作し、失敗しながら改善していくことを大切にしています。<br>
        得意なのは、人を頼って巻き込みながら前に進めること。
      </p>

      <div class="hero-label">これからしたいこと</div>
      <p class="hero-body hero-body--future">
        介護のスポットワークを可能にするAR商品の開発。<br>
        さらに「質を情報でサポートする」という思想を、介護以外の領域にも横展開し、起業につなげていきます。
      </p>

      <div class="hero-actions">
        <a href="#projects" class="btn-primary">プロジェクトを見る</a>
        <a href="#works" class="btn-ghost">作ったもの</a>
        <a href="#contact" class="btn-ghost">連絡する</a>
      </div>
    </div>

    <!-- 右側の顔 -->
    <div class="hero-face">
      <div class="hero-face-inner hero-face-right" id="heroFaceRight">
        <!-- 回転テキスト「やればできる」 -->
        <div class="rotating-text-wrapper">
          <div class="rotating-text-circle">
            <svg class="rotating-text-svg" viewBox="0 0 560 560" aria-hidden="true">
              <defs>
                <path id="circlePathRight" d="M280,280 m-240,0 a240,240 0 1,1 480,0 a240,240 0 1,1 -480,0" />
              </defs>
              <text class="rotating-text-text" textLength="1508" lengthAdjust="spacing">
                <textPath href="#circlePathRight">
                  やればできる　・　やればできる　・　やればできる　・　やればできる　・　やればできる　・　やればできる　・　やればできる　・　やればできる　・　やればできる　
                </textPath>
              </text>
            </svg>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

      <!-- projects -->
      <section id="projects" class="section">
        <div class="section-inner">
          <p class="section-title-eyebrow">PROJECTS</p>
          <h2 class="section-title-main"><span>行動</span>から生まれたプロジェクト</h2>

          <div class="projects-grid">
            <a class="project-card project-card-link" href="Hanabipage.html">
              <div class="project-tag">Hanabi / International Robotics</div>
              <div class="project-thumb">
  <img src="images/Hanabiの写真.png" alt="Hanabi 花火プロジェクト" loading="lazy" />
</div>
              <h3 class="project-title">営業リーダーとして 2,700万円を調達</h3>
              <p class="project-meta">5名 → 10名の組織で営業チームをリード</p>
              <p class="project-body">
                国際ロボコン挑戦のための資金調達を担当。提案資料の作成から企業訪問、交渉までを一貫して行い、2年間で合計2,700万円のスポンサー資金を獲得しました。
              </p>
              <span class="project-pill">営業リーダー / チーム運営</span>
            </a>

            <a class="project-card project-card-link" href="festibal.html">
              <div class="project-tag">KOSEN FESTIVAL</div>
              <div class="project-thumb">
                <img src="images/花火.png" alt="打ち上げ花火" loading="lazy" />
              </div>
              <h3 class="project-title">高専祭で打ち上げ花火を実現</h3>
              <p class="project-meta">実行リーダー / クラファン企画・安全管理</p>
              <p class="project-body">
                「みんなで1つの思い出作り」を目指し、打ち上げ花火企画を立案。クラウドファンディングの設計、煙火業者・消防団・県との調整までを担当し、初の花火打ち上げを実現しました。
              </p>
              <span class="project-pill">プロジェクトマネジメント / 調整力</span>
            </a>

            <a class="project-card project-card-link" href="Dcon.html">
              <div class="project-tag">DCON / CARE × AR × AI</div>
              <div class="project-thumb">
                <img src="images/介護.png" alt="介護現場向けAR×AIプロダクト" loading="lazy" />
              </div>
              <h3 class="project-title">介護をスポットワーク可能にするAR商品</h3>
              <p class="project-meta">チーム立ち上げ / コンセプト / ヒアリング</p>
              <p class="project-body">
                これから必ず社会に求められる介護のスポットワークを可能にするAR商品を開発中。</br>メンバー集めからコンセプト設計、施設へのヒアリングをリードしています。
              </p>
              <span class="project-pill">プロダクトリード / 現場リサーチ</span>
            </a>
          </div>

          <div style="margin-top: 2.8rem;">

      <div class="projects-grid">
        <div class="project-card">
          <div class="project-tag">HANABI OUTREACH</div>
          <h3 class="project-title">アウトリーチ活動</h3>
          <p class="project-meta">教育格差をなくすSTEMイベント運営</p>
          <p class="project-body">
            プログラミングの教育格差をなくすため、学校・イベント会場・ショッピング施設にてSTEMのイベントを開催。未来のエンジニア育成に貢献しました。
          </p>
          <span class="project-pill">企画 / 運営</span>
        </div>

        <div class="project-card">
          <div class="project-tag">LOCAL FESTIVAL</div>
          <h3 class="project-title">地域の祭り企画・運営</h3>
          <p class="project-meta">アイデア出し〜当日運営</p>
          <p class="project-body">
            地域の祭り運営に関わり、企画のアイデア出しや当日の運営を担当。場づくりの難しさと楽しさを学びました。
          </p>
          <span class="project-pill">地域連携 / 現場運営</span>
        </div>

        <div class="project-card">
          <div class="project-tag">KOSEN PROCON</div>
          <h3 class="project-title">高専プロコンへの挑戦</h3>
          <p class="project-meta">チームリーダー / アイデア・資料作成</p>
          <p class="project-body">
            高専プロコンに出場し、チームリーダーを担当。アイデア出し・資料作成を行い、本戦である全国大会進出を果たしました。
          </p>
          <span class="project-pill">リーダーシップ / 発表</span>
        </div>
      </div>

      <!-- CMS projects will be rendered here (below the 6 static project cards) -->
      <div id="projects-cms" class="projects-grid" style="margin-top: 1.5rem;"></div>
    </div>
        </div>
      </section>




      <!-- works -->
      <section id="works" class="section">
        <div class="section-inner">
          <p class="section-title-eyebrow">WORKS</p>
          <h2 class="section-title-main"><span>技術</span>で挑戦したプロトタイプ・AI</h2>
          <div class="works-grid">
            <div class="work-card">
              <div class="work-tag">Prototype / AI</div>
              <div class="work-title">うんちAI（排泄介助サポート）</div>
              <p class="work-body">
                介護の三大介助の一つである<strong>排泄介助</strong>に着目し、
                過去の排泄ログや生活リズムから次の排泄タイミングを予測するAI。
                新人や少人数体制でも、先回りした対応ができることを目指しています。
              </p>
              <div class="work-meta">Tech: Python / 時系列データ / 機械学習</div>
              <div class="work-links">
                <a class="work-link" href="#">Concept</a>
              </div>
            </div>

            <div class="work-card">
              <div class="work-tag">LLM / Fine-tuning</div>
              <div class="work-title">阿波弁対応カスタムLLM</div>
              <p class="work-body">
                既存のLLMをベースに<strong>阿波弁→標準語</strong>変換ができるようチューニング。
                介護現場で、新人スタッフが既存スタッフや入居者との
                方言コミュニケーションにつまずく課題の解消を狙っています。
              </p>
              <div class="work-meta">Tech: LLM / LoRA / Kaggle / Python</div>
              <div class="work-links">
                <a class="work-link" href="#">GitHub</a>
                <a class="work-link" href="#">Write-up</a>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- contact -->
      <section id="contact" class="section">
        <div class="section-inner">
          <p class="section-title-eyebrow">CONTACT</p>
          <h2 class="section-title-main">僕に連絡してみませんか？</h2>

          <div class="contact-form">
            <h3 style="font-size: 1.0rem; margin-bottom: 1.2rem; color: #000000;">メッセージを送る</h3>
            <form id="contactForm">
              <div class="form-group">
                <label class="form-label">お名前</label>
                <input type="text" name="name" class="form-input" required />
              </div>
              <div class="form-group">
                <label class="form-label">メールアドレス</label>
                <input type="email" name="email" class="form-input" required />
              </div>
              <div class="form-group">
                <label class="form-label">メッセージ</label>
                <textarea name="message" class="form-textarea" required></textarea>
              </div>
              <button type="submit" class="form-submit">送信</button>
              <div class="form-status" id="formStatus"></div>
            </form>
          </div>

          
          <div class="contact-box">
            <div class="contact-row">
              <div class="contact-label">EMAIL</div>
              <div class="contact-value">
                <a href="mailto:kmc2306@kamiyama.ac.jp">kmc2306@kamiyama.ac.jp</a>
              </div>
            </div>

          </div>

        </div>
      </section>
    </main>

  </div>
</body>
</html>